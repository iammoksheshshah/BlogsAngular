import{a as W,b as Y}from"./chunk-76S2ZO7Q.js";import"./chunk-CT5G5MLU.js";import{c as P,e as f,g as D,h as G,i as U,m as R,n as H,q as z,u as Q,v as q,w as K}from"./chunk-3R5LOSW2.js";import{b as O,q as h,s as g}from"./chunk-HI5UVXXW.js";import{$ as b,$a as T,$b as p,Ca as C,Ea as d,Gb as M,Ja as n,Ka as s,La as u,M as _,N as S,P as c,Pa as k,Pb as A,Sa as I,Sb as V,U as x,V as F,Za as E,_ as w,_a as N,aa as L,bb as a,bc as B,cb as j,pa as l,qa as m}from"./chunk-DWQQEXDO.js";var ie=60,oe=15e3,y="lastAction",X=(()=>{class i{constructor(t,e,o,r){this._httpClient=t,this._globalFunction=e,this.router=o,this.toatr=r,this.check(),this.initListener(),this.initInterval(),localStorage.setItem(y,Date.now().toString())}logIn(t){return this._httpClient.post(O.appUrl+"admin/login",t,this._globalFunction.getHeader())}getUserLoggedIn(){return localStorage.getItem("accessToken")?!0:(localStorage.removeItem("accessToken"),localStorage.clear(),this.toatr.clear(),this.toatr.error("Unauthorized Access.","Oops!"),this.router.navigate(["/"]),!1)}setLastAction(t){localStorage.setItem(y,t.toString())}getLastAction(){let t=localStorage.getItem(y);return parseInt(t)}reset(){this.setLastAction(Date.now())}initListener(){document.body.addEventListener("click",()=>this.reset()),document.body.addEventListener("mouseover",()=>this.reset()),document.body.addEventListener("mouseout",()=>this.reset()),document.body.addEventListener("keydown",()=>this.reset()),document.body.addEventListener("keyup",()=>this.reset()),document.body.addEventListener("keypress",()=>this.reset())}initInterval(){setInterval(()=>{this.check()},oe)}check(){let t=Date.now();this.getLastAction()+ie*60*1e3-t<0&&(localStorage.removeItem("accessToken"),localStorage.clear(),this.toatr.clear(),this.toatr.error("Unauthorized Access.","Oops!"),this.router.navigate(["/"]))}static{this.\u0275fac=function(e){return new(e||i)(c(V),c(g),c(p),c(h))}}static{this.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ne=["logInNgForm"];function se(i,le){i&1&&(n(0,"span",18),L(),n(1,"svg",19),u(2,"circle",20)(3,"path",21),s()())}var Z=(()=>{class i{constructor(t,e,o,r,v){this._formBuilder=t,this._router=e,this._globalFunctions=o,this.toastr=r,this._authService=v,this.logInForm=U,this.isBtnLoading=!1,this.hidePassword=!0}ngOnInit(){localStorage.clear(),this.logInForm=this._formBuilder.group({email:["",[f.required,f.email]],password:["",f.required]})}showPassword(){this.hidePassword=!this.hidePassword}validate(){let t=!0,e=[];if((!this.logInForm.value.email||this.logInForm.value.email==="")&&(e.push("Username"),t=!1),(!this.logInForm.value.password||this.logInForm.value.password==="")&&(e.push("Password"),t=!1),!t){let o="";o=e.join(" & "),this.toastr.clear(),this.toastr.error(o+" must be filled!","Oops!")}return t}logIn(){if(this.isBtnLoading=!0,!this.validate()){this.isBtnLoading=!1;return}let t={email:this.logInForm.value.email.toString(),password:this.logInForm.value.password};this.logInForm.disable(),this._authService.logIn(t).subscribe(e=>{e&&e.IsSuccess?(localStorage.setItem("accessToken",e.Data.accessToken),this.toastr.success(e.Message,"Success"),this.isBtnLoading=!1,this._router.navigate(["blog-list"])):(this.logInForm.enable(),this._globalFunctions.successErrorHandling(e,this,!0),this.isBtnLoading=!1)},e=>{this.logInForm.enable(),this.logInNgForm.resetForm(),this._globalFunctions.errorHanding(e,this,!0),this.isBtnLoading=!1})}static{this.\u0275fac=function(e){return new(e||i)(m(Q),m(p),m(g),m(h),m(X))}}static{this.\u0275cmp=x({type:i,selectors:[["app-login"]],viewQuery:function(e,o){if(e&1&&E(ne,5),e&2){let r;N(r=T())&&(o.logInNgForm=r.first)}},decls:25,vars:6,consts:[["logInNgForm","ngForm"],[1,"w-full","min-h-screen","sm:min-h-max","sm:h-screen","p-5","bg-primary","sm:bg-transparent","overflow-y-auto"],[1,"w-full","h-full","flex","flex-wrap","sm:flex-nowrap"],[1,"w-full","flex","items-center","justify-center","mt-7","sm:mt-0"],[1,"p-5","xl:p-7","rounded-xl","bg-white","sm:bg-transparent","shadow-2xl"],[1,"text-3xl","font-extrabold","text-dark"],[1,"text-sm","text-zinc-900","mt-1"],[1,"w-full","space-y-5","mt-6",3,"formGroup"],[1,"w-full"],["for","email",1,"text-sm","font-bold"],["type","email","name","email","id","email","placeholder","Enter your E-Mail",1,"w-full","text-sm","border","border-light_blue","text-light_blue","placeholder:text-light_blue","rounded-lg","outline-none","py-2","px-4",3,"formControlName"],[1,"w-full","relative"],["for","password",1,"text-sm","font-bold"],["name","password","id","password","placeholder","Enter your Password",1,"w-full","text-sm","border","border-light_blue","text-light_blue","placeholder:text-light_blue","rounded-lg","outline-none","py-2","px-4",3,"type","formControlName"],[1,"absolute","right-4","bottom-2","text-light_blue",3,"click"],["type","submit",1,"w-full","flex","items-center","justify-center","border-2","border-primary","rounded-lg","px-6","py-2","outline-none","bg-primary","hover:bg-white","anim","group",3,"click"],[1,"text-white","group-hover:text-primary","anim","anim"],["class","block",4,"ngIf"],[1,"block"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-mr-1","ml-3","h-5","w-5"],["cx","12","cy","12","r","10","stroke-width","4",1,"opacity-25","stroke-white","group-hover:stroke-primary","anim"],["d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75","fill-white","group-hover:fill-primary","anim"]],template:function(e,o){if(e&1){let r=k();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),a(5,"Sign In"),s(),n(6,"p",6),a(7,"Welcome back! Sign in to your account below."),s(),n(8,"form",7,0)(10,"div",8)(11,"label",9),a(12,"E-Mail"),s(),u(13,"input",10),s(),n(14,"div",11)(15,"label",12),a(16,"Password"),s(),u(17,"input",13),n(18,"mat-icon",14),I("click",function(){return w(r),b(o.showPassword())}),a(19),s()(),n(20,"div",8)(21,"button",15),I("click",function(){return w(r),b(o.logIn())}),n(22,"span",16),a(23,"Sign in"),s(),C(24,se,4,0,"span",17),s()()()()()()()}e&2&&(l(8),d("formGroup",o.logInForm),l(5),d("formControlName","email"),l(4),d("type",o.hidePassword?"password":"text")("formControlName","password"),l(2),j(o.hidePassword?"visibility":"visibility_off"),l(5),d("ngIf",o.isBtnLoading))},dependencies:[M,R,P,D,G,H,z,W]})}}return i})();var ae=[{path:"",component:Z}],ye=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=F({type:i})}static{this.\u0275inj=S({imports:[A,B.forChild(ae),q,K,Y]})}}return i})();export{ye as LoginModule};
